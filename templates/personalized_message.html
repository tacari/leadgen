{% extends "dashboard_base.html" %}
{% block title %}Personalized Outreach{% endblock %}
{% block content %}
<div class="bg-[#0D1321] min-h-screen text-white p-8">
    <!-- Header -->
    <h1 class="text-4xl font-bold text-center mb-4 animate-fade-in">Personalized Outreach</h1>
    <p class="text-lg text-[#A1A9B8] italic text-center mb-12">Craft unique messages that get responses</p>

    <!-- Lead Info Card -->
    <div class="max-w-4xl mx-auto mb-8">
        <div class="bg-[#1A2236] border border-[#7B00FF] rounded-lg p-6 animate-fade-in">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Lead Details -->
                <div>
                    <h2 class="text-2xl font-bold text-white mb-4">Lead Details</h2>
                    <div class="space-y-2 text-[#A1A9B8]">
                        <p><span class="font-bold">Name:</span> {{ lead.name }}</p>
                        <p><span class="font-bold">Email:</span> {{ lead.email }}</p>
                        {% if lead.phone %}
                        <p><span class="font-bold">Phone:</span> {{ lead.phone }}</p>
                        {% endif %}
                        <p><span class="font-bold">Source:</span> {{ lead.source }}</p>
                        {% if lead.niche %}
                        <p><span class="font-bold">Niche:</span> {{ lead.niche }}</p>
                        {% endif %}
                        {% if lead.city %}
                        <p><span class="font-bold">City:</span> {{ lead.city }}</p>
                        {% endif %}
                        <p><span class="font-bold">Lead Score:</span> 
                            <span class="{% if lead.score > 75 %}text-[#9F5FFF] font-medium{% else %}text-[#A1A9B8]{% endif %}">
                                {{ lead.score }}
                            </span>
                        </p>
                    </div>
                </div>

                <!-- Verification Status -->
                <div>
                    <h2 class="text-xl font-bold text-white mb-4">Verification Status</h2>
                    <div class="space-y-2">
                        <div class="flex items-center">
                            <span class="w-3 h-3 mr-2 rounded-full {{ 'bg-green-500' if lead.verified else 'bg-red-500' }}"></span>
                            <span class="text-[#A1A9B8]">Email: {{ "Verified" if lead.verified else "Not Verified" }}</span>
                        </div>
                        <div class="flex items-center">
                            <span class="w-3 h-3 mr-2 rounded-full {{ 'bg-green-500' if lead.phone_verified else 'bg-red-500' }}"></span>
                            <span class="text-[#A1A9B8]">Phone: {{ "Verified" if lead.phone_verified else "Not Verified" }}</span>
                        </div>
                        <div class="flex items-center">
                            <span class="w-3 h-3 mr-2 rounded-full {{ 'bg-green-500' if lead.linkedin_verified else 'bg-red-500' }}"></span>
                            <span class="text-[#A1A9B8]">LinkedIn: {{ "Verified" if lead.linkedin_verified else "Not Verified" }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Message Section -->
    <div class="max-w-4xl mx-auto mb-8">
        <div class="bg-[#1A2236] border border-[#7B00FF] rounded-lg p-6 animate-fade-in">
            <h2 class="text-2xl font-bold text-white mb-4">Personalized Message</h2>
            <div class="bg-[#0D1321] border border-[#7B00FF] rounded-lg p-4 mb-4">
                <p class="text-[#A1A9B8] whitespace-pre-line">{{ message }}</p>
            </div>
            <div class="flex space-x-4">
                <button id="copyBtn" class="bg-[#7B00FF] text-white px-4 py-2 rounded-lg hover:bg-[#8F00FF]">Copy to Clipboard</button>
                <a href="mailto:{{ lead.email }}" class="bg-transparent border border-[#7B00FF] text-white px-4 py-2 rounded-lg hover:bg-[#7B00FF]">
                    Send Email
                </a>
            </div>
        </div>
    </div>

    <!-- Email Template -->
    <div class="max-w-4xl mx-auto">
        <div class="bg-[#1A2236] border border-[#7B00FF] rounded-lg p-6 animate-fade-in">
            <h2 class="text-2xl font-bold text-white mb-4">Email Template</h2>
            <div class="bg-[#0D1321] border border-[#7B00FF] rounded-lg p-4 mb-4">
                <pre class="text-[#A1A9B8] whitespace-pre-line overflow-x-auto">{{ email_template }}</pre>
            </div>
            <div class="flex space-x-4">
                <button id="copyEmailBtn" class="bg-[#7B00FF] text-white px-4 py-2 rounded-lg hover:bg-[#8F00FF]">Copy Email</button>
            </div>
        </div>
    </div>
</div>

<script>
    document.getElementById('copyBtn').addEventListener('click', function() {
        const text = document.querySelector('.bg-[#0D1321] p').innerText;
        navigator.clipboard.writeText(text).then(() => {
            this.innerText = 'Copied!';
            setTimeout(() => {
                this.innerText = 'Copy to Clipboard';
            }, 2000);
        });
    });

    document.getElementById('copyEmailBtn').addEventListener('click', function() {
        const text = document.querySelector('.bg-[#0D1321] pre').innerText;
        navigator.clipboard.writeText(text).then(() => {
            this.innerText = 'Copied!';
            setTimeout(() => {
                this.innerText = 'Copy Email';
            }, 2000);
        });
    });
</script>

<style>
    @keyframes fade-in {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in {
        animation: fade-in 0.5s ease-out;
        animation-fill-mode: both;
    }
</style>
{% endblock %}